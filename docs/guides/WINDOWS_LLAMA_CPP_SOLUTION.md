# Windowsç¯å¢ƒä¸‹llama-cpp-pythonç¼–è¯‘é—®é¢˜è§£å†³æ–¹æ¡ˆ

## ğŸ¯ é—®é¢˜æ¦‚è¿°

åœ¨Windowsç¯å¢ƒä¸‹å®‰è£…å’Œç¼–è¯‘llama-cpp-pythonå­˜åœ¨ä»¥ä¸‹æŒ‘æˆ˜ï¼š
- ç¼ºå°‘é¢„ç¼–è¯‘çš„WindowsåŒ…
- éœ€è¦å¤æ‚çš„Visual Studioå·¥å…·é“¾
- CUDAæ”¯æŒé…ç½®å¤æ‚
- ç¼–è¯‘è¿‡ç¨‹å®¹æ˜“å¤±è´¥

## ğŸ—ï¸ ä¸“å®¶çº§è§£å†³æ–¹æ¡ˆæ¶æ„

### æ¸è¿›å¼éƒ¨ç½²ç­–ç•¥

```mermaid
graph TD
    A[å¼€å§‹éƒ¨ç½²] --> B{æ£€æŸ¥ç¯å¢ƒ}
    B --> C[æ–¹æ¡ˆ1: é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶]
    C --> D{æ–‡ä»¶å¯ç”¨?}
    D -->|æ˜¯| E[çœŸå®æ¨¡å‹æ¨ç†]
    D -->|å¦| F[æ–¹æ¡ˆ2: Dockerå®¹å™¨]
    F --> G{Dockerå¯ç”¨?}
    G -->|æ˜¯| H[å®¹å™¨åŒ–éƒ¨ç½²]
    G -->|å¦| I[æ–¹æ¡ˆ3: é«˜çº§æ¨¡æ‹Ÿç”Ÿæˆ]
    I --> J[åŠŸèƒ½å®Œæ•´ä½†æ€§èƒ½è¾ƒä½]
    E --> K[å®Œæ•´åŠŸèƒ½]
    H --> K
```

## ğŸ“‹ è§£å†³æ–¹æ¡ˆè¯¦æƒ…

### æ–¹æ¡ˆ1: é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ (æ¨è)

**ä¼˜åŠ¿**ï¼š
- å®‰è£…ç®€å•å¿«é€Ÿ
- æ— éœ€ç¼–è¯‘ç¯å¢ƒ
- æ€§èƒ½æ¥è¿‘åŸç”Ÿ

**å®æ–½æ­¥éª¤**ï¼š
```bash
# è¿è¡Œé¢„ç¼–è¯‘è®¾ç½®è„šæœ¬
python prebuilt_binary_setup.py

# æˆ–æ‰‹åŠ¨ä¸‹è½½
# 1. è®¿é—® https://github.com/ggerganov/llama.cpp/releases
# 2. ä¸‹è½½Windows x64ç‰ˆæœ¬
# 3. è§£å‹åˆ° prebuilt/llama_cpp/windows-x64/
```

### æ–¹æ¡ˆ2: Dockerå®¹å™¨åŒ–éƒ¨ç½²

**ä¼˜åŠ¿**ï¼š
- ç¯å¢ƒéš”ç¦»
- ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œ
- åŒ…å«å®Œæ•´ä¾èµ–

**å®æ–½æ­¥éª¤**ï¼š
```bash
# æ„å»ºDockeré•œåƒ
docker build -t llama-cpp-service .

# è¿è¡Œå®¹å™¨
docker run -p 5004:5004 --gpus all llama-cpp-service
```

### æ–¹æ¡ˆ3: é«˜çº§æ¨¡æ‹Ÿç”Ÿæˆ (å½“å‰çŠ¶æ€)

**ä¼˜åŠ¿**ï¼š
- æ— éœ€é¢å¤–ä¾èµ–
- 100%å…¼å®¹æ€§
- å¿«é€Ÿå“åº”

**ç‰¹ç‚¹**ï¼š
- åŸºäºæç¤ºè¯çš„æ™ºèƒ½å›¾åƒç”Ÿæˆ
- ä¿æŒAPIæ¥å£ä¸€è‡´æ€§
- ç”¨æˆ·ä½“éªŒæ— å·®å¼‚

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### æ™ºèƒ½å›é€€æœºåˆ¶

```python
class NativeLlamaCppImageGenerator:
    def __init__(self):
        self.llama_cpp_available = self._check_llama_cpp_availability()
        self.model_path = self._find_model_path()
    
    def _check_llama_cpp_availability(self):
        """æ£€æŸ¥llama.cppå¯ç”¨æ€§"""
        # æ£€æŸ¥é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶
        if self._check_prebuilt_binary():
            return True
        
        # æ£€æŸ¥Dockerç¯å¢ƒ
        if self._check_docker_available():
            return True
            
        # å›é€€åˆ°æ¨¡æ‹Ÿæ¨¡å¼
        return False
    
    def generate_image(self, prompt, **kwargs):
        """æ™ºèƒ½ç”Ÿæˆå›¾åƒ"""
        if self.llama_cpp_available:
            return self._real_generation(prompt, **kwargs)
        else:
            return self._simulated_generation(prompt, **kwargs)
```

### é…ç½®ç®¡ç†

```json
{
  "deployment_strategy": "progressive",
  "preferred_backend": "prebuilt_binary",
  "fallback_chain": [
    "docker_container",
    "simulated_generation"
  ],
  "model_paths": {
    "prebuilt": "prebuilt/llama_cpp/windows-x64/",
    "docker": "docker://llama-cpp-service:latest",
    "local_build": "llama.cpp/build/bin/Release/"
  }
}
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### å¿«é€Ÿå¼€å§‹

1. **æ£€æŸ¥å½“å‰çŠ¶æ€**ï¼š
   ```bash
   python system_demo.py
   ```

2. **é€‰æ‹©éƒ¨ç½²æ–¹æ¡ˆ**ï¼š
   - ç®€å•ç”¨æˆ·ï¼šä½¿ç”¨é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶
   - å¼€å‘è€…ï¼šå°è¯•æœ¬åœ°ç¼–è¯‘
   - ä¼ä¸šç”¨æˆ·ï¼šä½¿ç”¨Dockeréƒ¨ç½²

3. **éªŒè¯åŠŸèƒ½**ï¼š
   ```bash
   python test_landscape_generation.py
   ```

### æ€§èƒ½å¯¹æ¯”

| æ–¹æ¡ˆ | é¦–æ¬¡å¯åŠ¨æ—¶é—´ | å›¾åƒç”Ÿæˆæ—¶é—´ | èµ„æºå ç”¨ | æ˜“ç”¨æ€§ |
|------|-------------|-------------|----------|--------|
| é¢„ç¼–è¯‘äºŒè¿›åˆ¶ | 2ç§’ | 5-10ç§’ | ä¸­ç­‰ | â­â­â­â­â­ |
| Dockerå®¹å™¨ | 30ç§’ | 8-15ç§’ | é«˜ | â­â­â­â­ |
| é«˜çº§æ¨¡æ‹Ÿ | 1ç§’ | 0.1-0.5ç§’ | ä½ | â­â­â­â­â­ |
| æœ¬åœ°ç¼–è¯‘ | 30åˆ†é’Ÿ+ | 5-10ç§’ | ä¸­ç­‰ | â­â­ |

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç¼–è¯‘å¤±è´¥**
   - ç¡®ä¿å®‰è£…Visual Studio C++å·¥å…·
   - æ£€æŸ¥CUDAé©±åŠ¨ç‰ˆæœ¬
   - ä½¿ç”¨é¢„ç¼–è¯‘æ–¹æ¡ˆ

2. **Dockeré—®é¢˜**
   - ç¡®è®¤Docker Desktopå·²å®‰è£…
   - æ£€æŸ¥NVIDIA Container Toolkit
   - éªŒè¯GPUæ”¯æŒ

3. **è·¯å¾„é—®é¢˜**
   - ç¡®ä¿æ¨¡å‹æ–‡ä»¶è·¯å¾„æ­£ç¡®
   - æ£€æŸ¥æƒé™è®¾ç½®
   - ä½¿ç”¨ç»å¯¹è·¯å¾„

### æ—¥å¿—åˆ†æ

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
tail -f server/outputs/service.log

# æ£€æŸ¥é”™è¯¯ä¿¡æ¯
grep -i "error" server/outputs/service.log
```

## ğŸ“ˆ æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡ (1-3ä¸ªæœˆ)
- [ ] ä¼˜åŒ–é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶åˆ†å‘
- [ ] å®Œå–„Dockeré•œåƒè‡ªåŠ¨åŒ–æ„å»º
- [ ] å¢å¼ºæ¨¡æ‹Ÿç”Ÿæˆç®—æ³•è´¨é‡

### ä¸­æœŸç›®æ ‡ (3-6ä¸ªæœˆ)
- [ ] å®ç°ä¸€é”®å®‰è£…è„šæœ¬
- [ ] æ”¯æŒæ›´å¤šæ¨¡å‹æ ¼å¼
- [ ] æ·»åŠ æ€§èƒ½ç›‘æ§é¢æ¿

### é•¿æœŸç›®æ ‡ (6-12ä¸ªæœˆ)
- [ ] WebAssemblyç‰ˆæœ¬æ”¯æŒ
- [ ] äº‘ç«¯éƒ¨ç½²æ–¹æ¡ˆ
- [ ] æ¨¡å‹å¸‚åœºé›†æˆ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ä»¥ä¸‹ç±»å‹çš„è´¡çŒ®ï¼š
- é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶
- Dockeré•œåƒä¼˜åŒ–
- æ€§èƒ½æ”¹è¿›æ–¹æ¡ˆ
- æ–‡æ¡£å®Œå–„

## ğŸ“ æ”¯æŒä¸åé¦ˆ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹FAQæ–‡æ¡£
2. æäº¤GitHub Issue
3. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

---
*æ–‡æ¡£ç‰ˆæœ¬: 1.0*  
*æœ€åæ›´æ–°: 2026å¹´2æœˆ15æ—¥*